Index: app/src/main/java/za/thirdyear/schedu/LoginActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package za.thirdyear.schedu\r\n\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.Toast\r\nimport com.google.firebase.FirebaseApp\r\nimport com.google.firebase.auth.FirebaseAuth\r\n\r\n\r\n\r\n\r\nclass LoginActivity : AppCompatActivity() {\r\n    private lateinit var btnRegister: Button\r\n    private lateinit var btnLogin: Button\r\n    private lateinit var txtEmailAddress: EditText\r\n    private lateinit var txtPassword: EditText\r\n    private lateinit var sharedPreferences: SharedPreferences\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n\r\n\r\n        // Initialize SharedPreferences\r\n        var sharedPreferences = getSharedPreferences(\"UserData\", MODE_PRIVATE)\r\n\r\n        FirebaseApp.initializeApp(this) //Initialise Firebase App in application\r\n\r\n\r\n        // Initialize views\r\n        btnRegister = findViewById(R.id.btnRegisterRedirect)\r\n        btnLogin = findViewById(R.id.btnLogin)\r\n        txtEmailAddress = findViewById(R.id.txtEmailAddress)\r\n        txtPassword = findViewById(R.id.txtPassword)\r\n\r\n        // Redirect to Register Page\r\n        btnRegister.setOnClickListener {\r\n            val registerPage = Intent(this, RegistrationActivity::class.java)\r\n            startActivity(registerPage)\r\n        }\r\n\r\n        // Authenticate User\r\n        btnLogin.setOnClickListener {\r\n            val email = txtEmailAddress.text.toString().trim()\r\n            val password = txtPassword.text.toString().trim()\r\n\r\n            // Retrieve saved user data from SharedPreferences\r\n            val savedEmail = sharedPreferences.getString(\"emailAddress\", \"\")\r\n            val savedPassword = sharedPreferences.getString(\"password\", \"\")\r\n\r\n            // Compare user input with saved data\r\n            if (email == savedEmail && password == savedPassword) {\r\n                // Login successful, navigate to main activity\r\n                val mainIntent = Intent(this, MainActivity::class.java)\r\n                startActivity(mainIntent)\r\n            } else {\r\n                // Login failed, display error message\r\n                Toast.makeText(this, \"Invalid email or password\", Toast.LENGTH_SHORT).show()\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/za/thirdyear/schedu/LoginActivity.kt b/app/src/main/java/za/thirdyear/schedu/LoginActivity.kt
--- a/app/src/main/java/za/thirdyear/schedu/LoginActivity.kt	
+++ b/app/src/main/java/za/thirdyear/schedu/LoginActivity.kt	
@@ -12,9 +12,7 @@
 import com.google.firebase.auth.FirebaseAuth
 
 
-
-
-class LoginActivity : AppCompatActivity() {
+public class LoginActivity : AppCompatActivity() {
     private lateinit var btnRegister: Button
     private lateinit var btnLogin: Button
     private lateinit var txtEmailAddress: EditText
@@ -26,7 +24,6 @@
         setContentView(R.layout.activity_login)
 
 
-
         // Initialize SharedPreferences
         var sharedPreferences = getSharedPreferences("UserData", MODE_PRIVATE)
 
Index: app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package za.thirdyear.schedu\r\n\r\nimport android.app.Activity\r\nimport android.content.Intent\r\nimport android.graphics.Bitmap\r\nimport android.graphics.Canvas\r\nimport android.graphics.drawable.Drawable\r\nimport android.media.Image\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.os.Environment\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.core.app.ActivityCompat\r\nimport androidx.core.content.ContextCompat\r\nimport android.content.pm.PackageManager\r\nimport android.nfc.Tag\r\nimport android.provider.MediaStore\r\nimport android.util.Log\r\nimport androidx.appcompat.app.AlertDialog\r\n\r\nimport androidx.compose.ui.graphics.ImageBitmap\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.ktx.*\r\nimport com.google.firebase.ktx.Firebase\r\nimport layout.Category\r\nimport androidx.compose.runtime.CompositionLocalProvider\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.ui.platform.ComposeView\r\nimport androidx.lifecycle.lifecycleScope\r\nimport kotlinx.coroutines.Dispatchers\r\nimport kotlinx.coroutines.launch\r\nimport kotlinx.coroutines.withContext\r\nimport java.io.File\r\nimport java.io.FileOutputStream\r\nimport java.io.OutputStream\r\nimport java.net.Authenticator\r\nimport java.text.SimpleDateFormat\r\nimport java.util.Date\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport com.google.android.material.navigation.NavigationView\r\nimport androidx.appcompat.app.ActionBarDrawerToggle\r\nimport androidx.appcompat.widget.Toolbar\r\n\r\nclass CreateCategoryActivity : AppCompatActivity() {\r\n    private lateinit var btnAddCategoryPhoto: Button\r\n    private lateinit var imgCategoryPhoto: ImageView\r\n    private lateinit var txtCategoryName: EditText\r\n    private lateinit var btnCreateCategory: Button\r\n\r\n    private lateinit var drawerLayout: DrawerLayout\r\n    private lateinit var navigationView: NavigationView\r\n    private lateinit var toolbar: Toolbar\r\n\r\n\r\n    //Code for UserID Preference\r\n    private lateinit var authenticator: FirebaseAuth\r\n\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?)\r\n    {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_create_category)\r\n\r\n        drawerLayout = findViewById(R.id.drawer_layout)\r\n        navigationView = findViewById(R.id.navigationView)\r\n        toolbar = findViewById(R.id.toolbar)\r\n        val toggle = ActionBarDrawerToggle(\r\n            this,\r\n            drawerLayout,\r\n            toolbar,\r\n            R.string.navigation_drawer_open,\r\n            R.string.navigation_drawer_close\r\n        )\r\n        drawerLayout.addDrawerListener(toggle)\r\n        toggle.syncState()\r\n        navigationView.setNavigationItemSelectedListener { menuItem ->\r\n            when (menuItem.itemId) {\r\n                R.id.nav_create_categories -> {\r\n                    val moveIntent = Intent(this, CreateCategoryActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_view_categories -> {\r\n                    val moveIntent = Intent(this, ViewCategoriesActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_display_details->{\r\n                    val moveIntent = Intent(this, DisplayDetails::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_logout->{\r\n                    val moveIntent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n\r\n\r\n\r\n                else -> false\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n//Check if user is still signed in\r\n        authenticator = Firebase.auth\r\n        val currentUser = FirebaseAuth.getInstance().currentUser\r\n        if(currentUser == null) /**If User is signed out**/\r\n        {\r\n            //Redirect to Login Activity with intent\r\n            val intent : Intent = Intent(this, LoginActivity::class.java)\r\n        }\r\n\r\n\r\n        /******Hooks******/\r\n        btnAddCategoryPhoto = findViewById(R.id.btnAddCategoryPhoto)\r\n        txtCategoryName = findViewById(R.id.txtCategoryName)\r\n        imgCategoryPhoto = findViewById(R.id.imgCategoryImage)\r\n        btnCreateCategory = findViewById(R.id.btnCreateCategory)\r\n\r\n        /******Variables******/\r\n        val bitmap = Bitmap.createBitmap(imgCategoryPhoto.width,\r\n                                        imgCategoryPhoto.height,\r\n                                        Bitmap.Config.ARGB_8888)\r\n        val canvas = Canvas(bitmap)\r\n        imgCategoryPhoto.draw(canvas)\r\n        btnAddCategoryPhoto.setOnClickListener()\r\n        {\r\n            /******Popup option asking if user wished to add image from gallery or take photo******/\r\n            val options = arrayOf<String>(\"Select image from gallery\", \"Take photo\")\r\n            val popUp = AlertDialog.Builder(this)\r\n            popUp.setTitle(\"Select an option\")\r\n            popUp.setItems(options)\r\n            { dialog, selection ->\r\n                // Respond to option selection\r\n                when (selection) {\r\n                    0 -> {\r\n                        //Boolean function to check if app can access Gallery\r\n                        val PICK_IMAGE_REQUEST = 1\r\n                        val REQUEST_PERMISSION_CODE = 2\r\n                        /******Check if user has permission to access Gallery- rename variables******/\r\n                        fun CheckPermissions() : Boolean\r\n                        {\r\n                            return ContextCompat.checkSelfPermission(\r\n                                this,\r\n                                Manifest.permission.DYNAMIC_RECEIVER_NOT_EXPORTED_PERMISSION\r\n                            ) == PackageManager.PERMISSION_GRANTED\r\n                        }\r\n\r\n                        /******Request if user has permission to access Gallery- rename variables- Check this code later******/\r\n                        //fun requestPermission() {\r\n                        //    ActivityCompat.requestPermissions(\r\n                        //        this,\r\n                        //        arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE),\r\n                        //        REQUEST_PERMISSION_CODE\r\n                        //    )\r\n                        //}\r\n\r\n                        //Open Gallery\r\n                        @Override\r\n                        fun openGallery() {\r\n                            val galleryIntent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)\r\n                            startActivityForResult(galleryIntent, PICK_IMAGE_REQUEST)\r\n                        }\r\n\r\n                        fun onRequestPermissionsResult(\r\n                            requestCode: Int,\r\n                            permissions: Array<String>,\r\n                            grantResults: IntArray\r\n                        ) {\r\n                            super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n                            if (requestCode == REQUEST_PERMISSION_CODE) {\r\n                                if (grantResults.isNotEmpty() && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                                    openGallery()\r\n                                } else {\r\n                                    // Permission denied, handle it\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        //Select Image from Gallery\r\n                        @Override\r\n                        fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n                            super.onActivityResult(requestCode, resultCode, data)\r\n\r\n                            if (requestCode == PICK_IMAGE_REQUEST && resultCode == Activity.RESULT_OK && data != null) {\r\n                                // Image is selected from the gallery, handle it\r\n                                val selectedImageUri = data.data\r\n                                // Now you can do whatever you want with the selected image URI\r\n                                // For example, you can display it in an ImageView or upload it to Firebase\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                    1 -> {\r\n                        //Redirect to AddPhotoActivity\r\n                        val  addPhotoActivity : Intent = Intent(this, AddPhotoActivity::class.java)\r\n                        startActivity(addPhotoActivity)\r\n                    }\r\n                }\r\n            }\r\n\r\n        //Still need to convert ImageView to Image\r\n        lifecycleScope.launch {\r\n\r\n            try\r\n            {\r\n                var date = Date().time.toString()\r\n                var path: String =  applicationContext.filesDir.path\r\n                var fout: OutputStream\r\n\r\n                //Category name is the name of the category name associated with the image\r\n                var newFile: File = File(path,\"CategoryName\")\r\n                if (!newFile.exists()) {\r\n                    newFile.mkdirs();\r\n                }\r\n\r\n                var newFile2: File = File(newFile, \"$date.png\");\r\n                fout = FileOutputStream(newFile2);\r\n\r\n                //add your bitmap\r\n                bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)\r\n                fout.flush()\r\n                fout.close()\r\n\r\n\r\n                } catch (e: Exception) {\r\n                    //Logcat message- unable to use image\r\n                    e.printStackTrace()\r\n                    Log.d(\"btnAddCategoryPhoto\", \"Unable to convert ImageView to image\")\r\n                }\r\n\r\n        }\r\n\r\n        //var newCategoryImage : File = (Environment.getExternalStorageDirectory(),\r\n        //                                    \"/Android/data/\",\r\n        //                                    getApplicationContext().getPackageName(),\r\n        //                                    \"/Files\")\r\n\r\n        /******btnAddCategoryPhoto Event Handlers******/\r\n        //Move to activity to take photo and use shared preference to transfer photo to this activity\r\n\r\n\r\n        /******btnCreateCategory Event Handlers******/\r\n        //Use Category Class to put category in other class\r\n        btnCreateCategory.setOnClickListener()\r\n        {\r\n            Category(\"CAT000000\", \"User000000\", txtCategoryName.toString(), imgCategoryPhoto)\r\n            try {\r\n                var enterNewCategory: Boolean\r\n                //Display Popup to ask if user wants to take a photo or use image from gallery\r\n\r\n            } catch (e: Exception) {\r\n                //Logcat message- unable to create category\r\n\r\n                //Popup message indicating that category was unable to be created\r\n\r\n\r\n                }\r\n            catch (e : Exception)\r\n            {\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt b/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt
--- a/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt	
+++ b/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt	
@@ -21,7 +21,6 @@
 import android.provider.MediaStore
 import android.util.Log
 import androidx.appcompat.app.AlertDialog
-
 import androidx.compose.ui.graphics.ImageBitmap
 import com.google.firebase.auth.FirebaseAuth
 import com.google.firebase.auth.ktx.*
@@ -65,7 +64,6 @@
     {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_create_category)
-
         drawerLayout = findViewById(R.id.drawer_layout)
         navigationView = findViewById(R.id.navigationView)
         toolbar = findViewById(R.id.toolbar)
@@ -108,8 +106,6 @@
         }
 
 
-
-
 //Check if user is still signed in
         authenticator = Firebase.auth
         val currentUser = FirebaseAuth.getInstance().currentUser
@@ -146,14 +142,11 @@
                         //Boolean function to check if app can access Gallery
                         val PICK_IMAGE_REQUEST = 1
                         val REQUEST_PERMISSION_CODE = 2
+
                         /******Check if user has permission to access Gallery- rename variables******/
-                        fun CheckPermissions() : Boolean
-                        {
-                            return ContextCompat.checkSelfPermission(
-                                this,
-                                Manifest.permission.DYNAMIC_RECEIVER_NOT_EXPORTED_PERMISSION
-                            ) == PackageManager.PERMISSION_GRANTED
-                        }
+                        //fun CheckPermissions(): Boolean {
+
+                        //}
 
                         /******Request if user has permission to access Gallery- rename variables- Check this code later******/
                         //fun requestPermission() {
@@ -167,7 +160,10 @@
                         //Open Gallery
                         @Override
                         fun openGallery() {
-                            val galleryIntent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)
+                            val galleryIntent = Intent(
+                                Intent.ACTION_PICK,
+                                MediaStore.Images.Media.EXTERNAL_CONTENT_URI
+                            )
                             startActivityForResult(galleryIntent, PICK_IMAGE_REQUEST)
                         }
 
@@ -203,34 +199,33 @@
 
                     1 -> {
                         //Redirect to AddPhotoActivity
-                        val  addPhotoActivity : Intent = Intent(this, AddPhotoActivity::class.java)
+                        val addPhotoActivity: Intent = Intent(this, AddPhotoActivity::class.java)
                         startActivity(addPhotoActivity)
                     }
                 }
             }
 
-        //Still need to convert ImageView to Image
-        lifecycleScope.launch {
+            //Still need to convert ImageView to Image
+            lifecycleScope.launch {
 
-            try
-            {
-                var date = Date().time.toString()
-                var path: String =  applicationContext.filesDir.path
-                var fout: OutputStream
+                try {
+                    var date = Date().time.toString()
+                    var path: String = applicationContext.filesDir.path
+                    var fout: OutputStream
 
-                //Category name is the name of the category name associated with the image
-                var newFile: File = File(path,"CategoryName")
-                if (!newFile.exists()) {
-                    newFile.mkdirs();
-                }
+                    //Category name is the name of the category name associated with the image
+                    var newFile: File = File(path, "CategoryName")
+                    if (!newFile.exists()) {
+                        newFile.mkdirs();
+                    }
 
-                var newFile2: File = File(newFile, "$date.png");
-                fout = FileOutputStream(newFile2);
+                    var newFile2: File = File(newFile, "$date.png");
+                    fout = FileOutputStream(newFile2);
 
-                //add your bitmap
-                bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)
-                fout.flush()
-                fout.close()
+                    //add your bitmap
+                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)
+                    fout.flush()
+                    fout.close()
 
 
                 } catch (e: Exception) {
@@ -239,42 +234,40 @@
                     Log.d("btnAddCategoryPhoto", "Unable to convert ImageView to image")
                 }
 
-        }
+            }
 
-        //var newCategoryImage : File = (Environment.getExternalStorageDirectory(),
-        //                                    "/Android/data/",
-        //                                    getApplicationContext().getPackageName(),
-        //                                    "/Files")
+            //var newCategoryImage : File = (Environment.getExternalStorageDirectory(),
+            //                                    "/Android/data/",
+            //                                    getApplicationContext().getPackageName(),
+            //                                    "/Files")
 
-        /******btnAddCategoryPhoto Event Handlers******/
-        //Move to activity to take photo and use shared preference to transfer photo to this activity
+            /******btnAddCategoryPhoto Event Handlers******/
+            //Move to activity to take photo and use shared preference to transfer photo to this activity
 
 
-        /******btnCreateCategory Event Handlers******/
-        //Use Category Class to put category in other class
-        btnCreateCategory.setOnClickListener()
-        {
-            Category("CAT000000", "User000000", txtCategoryName.toString(), imgCategoryPhoto)
-            try {
-                var enterNewCategory: Boolean
-                //Display Popup to ask if user wants to take a photo or use image from gallery
+            /******btnCreateCategory Event Handlers******/
+            //Use Category Class to put category in other class
+            btnCreateCategory.setOnClickListener()
+            {
+                Category("CAT000000", "User000000", txtCategoryName.toString(), imgCategoryPhoto)
+                try {
+                    var enterNewCategory: Boolean
+                    //Display Popup to ask if user wants to take a photo or use image from gallery
 
-            } catch (e: Exception) {
-                //Logcat message- unable to create category
+                } catch (e: Exception) {
+                    //Logcat message- unable to create category
 
-                //Popup message indicating that category was unable to be created
+                    //Popup message indicating that category was unable to be created
 
 
-                }
-            catch (e : Exception)
-            {
+                } catch (e: Exception) {
 
-            }
+                }
 
-        }
+            }
 
 
-
+        }
 
     }
 }
\ No newline at end of file
