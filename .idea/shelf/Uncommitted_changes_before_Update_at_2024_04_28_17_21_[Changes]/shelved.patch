Index: app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package za.thirdyear.schedu\r\n\r\nimport android.app.Activity\r\nimport android.content.Intent\r\nimport android.graphics.Bitmap\r\nimport android.graphics.Canvas\r\nimport android.graphics.drawable.Drawable\r\nimport android.media.Image\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.os.Environment\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.core.app.ActivityCompat\r\nimport androidx.core.content.ContextCompat\r\nimport android.content.pm.PackageManager\r\nimport android.nfc.Tag\r\nimport android.provider.MediaStore\r\nimport android.util.Log\r\nimport androidx.appcompat.app.AlertDialog\r\n\r\nimport androidx.compose.ui.graphics.ImageBitmap\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.ktx.*\r\nimport com.google.firebase.ktx.Firebase\r\nimport layout.Category\r\nimport androidx.compose.runtime.CompositionLocalProvider\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.ui.platform.ComposeView\r\nimport androidx.lifecycle.lifecycleScope\r\nimport kotlinx.coroutines.Dispatchers\r\nimport kotlinx.coroutines.launch\r\nimport kotlinx.coroutines.withContext\r\nimport java.io.File\r\nimport java.io.FileOutputStream\r\nimport java.io.OutputStream\r\nimport java.net.Authenticator\r\nimport java.text.SimpleDateFormat\r\nimport java.util.Date\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport com.google.android.material.navigation.NavigationView\r\nimport androidx.appcompat.app.ActionBarDrawerToggle\r\nimport androidx.appcompat.widget.Toolbar\r\n\r\nclass CreateCategoryActivity : AppCompatActivity() {\r\n    private lateinit var btnAddCategoryPhoto: Button\r\n    private lateinit var imgCategoryPhoto: ImageView\r\n    private lateinit var txtCategoryName: EditText\r\n    private lateinit var btnCreateCategory: Button\r\n\r\n    private lateinit var drawerLayout: DrawerLayout\r\n    private lateinit var navigationView: NavigationView\r\n    private lateinit var toolbar: Toolbar\r\n\r\n\r\n    //Code for UserID Preference\r\n    private lateinit var authenticator: FirebaseAuth\r\n\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?)\r\n    {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_create_category)\r\n\r\n        drawerLayout = findViewById(R.id.drawer_layout)\r\n        navigationView = findViewById(R.id.navigationView)\r\n        toolbar = findViewById(R.id.toolbar)\r\n        val toggle = ActionBarDrawerToggle(\r\n            this,\r\n            drawerLayout,\r\n            toolbar,\r\n            R.string.navigation_drawer_open,\r\n            R.string.navigation_drawer_close\r\n        )\r\n        drawerLayout.addDrawerListener(toggle)\r\n        toggle.syncState()\r\n        navigationView.setNavigationItemSelectedListener { menuItem ->\r\n            when (menuItem.itemId) {\r\n                R.id.nav_create_categories -> {\r\n                    val moveIntent = Intent(this, CreateCategoryActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_view_categories -> {\r\n                    val moveIntent = Intent(this, ViewCategoriesActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_display_details->{\r\n                    val moveIntent = Intent(this, DisplayDetails::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n                R.id.nav_logout->{\r\n                    val moveIntent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(moveIntent)\r\n                    true\r\n                }\r\n\r\n\r\n\r\n                else -> false\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n//Check if user is still signed in\r\n        authenticator = Firebase.auth\r\n        val currentUser = FirebaseAuth.getInstance().currentUser\r\n        if(currentUser == null) /**If User is signed out**/\r\n        {\r\n            //Redirect to Login Activity with intent\r\n            val intent : Intent = Intent(this, LoginActivity::class.java)\r\n        }\r\n\r\n\r\n        /******Hooks******/\r\n        btnAddCategoryPhoto = findViewById(R.id.btnAddCategoryPhoto)\r\n        txtCategoryName = findViewById(R.id.txtCategoryName)\r\n        imgCategoryPhoto = findViewById(R.id.imgCategoryImage)\r\n        btnCreateCategory = findViewById(R.id.btnCreateCategory)\r\n\r\n        /******Variables******/\r\n        val bitmap = Bitmap.createBitmap(imgCategoryPhoto.width,\r\n                                        imgCategoryPhoto.height,\r\n                                        Bitmap.Config.ARGB_8888)\r\n        val canvas = Canvas(bitmap)\r\n        imgCategoryPhoto.draw(canvas)\r\n        btnAddCategoryPhoto.setOnClickListener()\r\n        {\r\n            /******Popup option asking if user wished to add image from gallery or take photo******/\r\n            val options = arrayOf<String>(\"Select image from gallery\", \"Take photo\")\r\n            val popUp = AlertDialog.Builder(this)\r\n            popUp.setTitle(\"Select an option\")\r\n            popUp.setItems(options)\r\n            { dialog, selection ->\r\n                // Respond to option selection\r\n                when (selection) {\r\n                    0 -> {\r\n                        //Boolean function to check if app can access Gallery\r\n                        val PICK_IMAGE_REQUEST = 1\r\n                        val REQUEST_PERMISSION_CODE = 2\r\n                        /******Check if user has permission to access Gallery- rename variables******/\r\n                        fun CheckPermissions() : Boolean\r\n                        {\r\n                            return ContextCompat.checkSelfPermission(\r\n                                this,\r\n                                Manifest.permission.DYNAMIC_RECEIVER_NOT_EXPORTED_PERMISSION\r\n                            ) == PackageManager.PERMISSION_GRANTED\r\n                        }\r\n\r\n                        /******Request if user has permission to access Gallery- rename variables- Check this code later******/\r\n                        //fun requestPermission() {\r\n                        //    ActivityCompat.requestPermissions(\r\n                        //        this,\r\n                        //        arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE),\r\n                        //        REQUEST_PERMISSION_CODE\r\n                        //    )\r\n                        //}\r\n\r\n                        //Open Gallery\r\n                        @Override\r\n                        fun openGallery() {\r\n                            val galleryIntent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)\r\n                            startActivityForResult(galleryIntent, PICK_IMAGE_REQUEST)\r\n                        }\r\n\r\n                        fun onRequestPermissionsResult(\r\n                            requestCode: Int,\r\n                            permissions: Array<String>,\r\n                            grantResults: IntArray\r\n                        ) {\r\n                            super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n                            if (requestCode == REQUEST_PERMISSION_CODE) {\r\n                                if (grantResults.isNotEmpty() && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                                    openGallery()\r\n                                } else {\r\n                                    // Permission denied, handle it\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        //Select Image from Gallery\r\n                        @Override\r\n                        fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n                            super.onActivityResult(requestCode, resultCode, data)\r\n\r\n                            if (requestCode == PICK_IMAGE_REQUEST && resultCode == Activity.RESULT_OK && data != null) {\r\n                                // Image is selected from the gallery, handle it\r\n                                val selectedImageUri = data.data\r\n                                // Now you can do whatever you want with the selected image URI\r\n                                // For example, you can display it in an ImageView or upload it to Firebase\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                    1 -> {\r\n                        //Redirect to AddPhotoActivity\r\n                        val  addPhotoActivity : Intent = Intent(this, AddPhotoActivity::class.java)\r\n                        startActivity(addPhotoActivity)\r\n                    }\r\n                }\r\n            }\r\n\r\n        //Still need to convert ImageView to Image\r\n        lifecycleScope.launch {\r\n\r\n            try\r\n            {\r\n                var date = Date().time.toString()\r\n                var path: String =  applicationContext.filesDir.path\r\n                var fout: OutputStream\r\n\r\n                //Category name is the name of the category name associated with the image\r\n                var newFile: File = File(path,\"CategoryName\")\r\n                if (!newFile.exists()) {\r\n                    newFile.mkdirs();\r\n                }\r\n\r\n                var newFile2: File = File(newFile, \"$date.png\");\r\n                fout = FileOutputStream(newFile2);\r\n\r\n                //add your bitmap\r\n                bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)\r\n                fout.flush()\r\n                fout.close()\r\n\r\n\r\n                } catch (e: Exception) {\r\n                    //Logcat message- unable to use image\r\n                    e.printStackTrace()\r\n                    Log.d(\"btnAddCategoryPhoto\", \"Unable to convert ImageView to image\")\r\n                }\r\n\r\n        }\r\n\r\n        //var newCategoryImage : File = (Environment.getExternalStorageDirectory(),\r\n        //                                    \"/Android/data/\",\r\n        //                                    getApplicationContext().getPackageName(),\r\n        //                                    \"/Files\")\r\n\r\n        /******btnAddCategoryPhoto Event Handlers******/\r\n        //Move to activity to take photo and use shared preference to transfer photo to this activity\r\n\r\n\r\n        /******btnCreateCategory Event Handlers******/\r\n        //Use Category Class to put category in other class\r\n        btnCreateCategory.setOnClickListener()\r\n        {\r\n            Category(\"CAT000000\", \"User000000\", txtCategoryName.toString(), imgCategoryPhoto)\r\n            try {\r\n                var enterNewCategory: Boolean\r\n                //Display Popup to ask if user wants to take a photo or use image from gallery\r\n\r\n            } catch (e: Exception) {\r\n                //Logcat message- unable to create category\r\n\r\n                //Popup message indicating that category was unable to be created\r\n\r\n\r\n                }\r\n            catch (e : Exception)\r\n            {\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt b/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt
--- a/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt	(revision 4b01cd7fa27a8f12dda0dc2e6a82e92e4b8c4bb1)
+++ b/app/src/main/java/za/thirdyear/schedu/CreateCategoryActivity.kt	(date 1714136119437)
@@ -2,26 +2,23 @@
 
 import android.app.Activity
 import android.content.Intent
+import android.content.pm.PackageManager
 import android.graphics.Bitmap
 import android.graphics.Canvas
 import android.graphics.drawable.Drawable
 import android.media.Image
+import android.nfc.Tag
 import android.os.Build
 import androidx.appcompat.app.AppCompatActivity
 import android.os.Bundle
 import android.os.Environment
+import android.provider.MediaStore
+import android.util.Log
 import android.widget.Button
 import android.widget.EditText
 import android.widget.ImageView
 import androidx.annotation.RequiresApi
-import androidx.core.app.ActivityCompat
-import androidx.core.content.ContextCompat
-import android.content.pm.PackageManager
-import android.nfc.Tag
-import android.provider.MediaStore
-import android.util.Log
 import androidx.appcompat.app.AlertDialog
-
 import androidx.compose.ui.graphics.ImageBitmap
 import com.google.firebase.auth.FirebaseAuth
 import com.google.firebase.auth.ktx.*
@@ -30,6 +27,8 @@
 import androidx.compose.runtime.CompositionLocalProvider
 import androidx.compose.runtime.remember
 import androidx.compose.ui.platform.ComposeView
+import androidx.core.app.ActivityCompat
+import androidx.core.content.ContextCompat
 import androidx.lifecycle.lifecycleScope
 import kotlinx.coroutines.Dispatchers
 import kotlinx.coroutines.launch
@@ -59,7 +58,6 @@
     //Code for UserID Preference
     private lateinit var authenticator: FirebaseAuth
 
-
     @RequiresApi(Build.VERSION_CODES.O)
     override fun onCreate(savedInstanceState: Bundle?)
     {
@@ -218,19 +216,19 @@
                 var path: String =  applicationContext.filesDir.path
                 var fout: OutputStream
 
-                //Category name is the name of the category name associated with the image
-                var newFile: File = File(path,"CategoryName")
-                if (!newFile.exists()) {
-                    newFile.mkdirs();
-                }
+                    //Category name is the name of the category name associated with the image
+                    var newFile: File = File(path, "CategoryName")
+                    if (!newFile.exists()) {
+                        newFile.mkdirs()
+                    }
 
-                var newFile2: File = File(newFile, "$date.png");
-                fout = FileOutputStream(newFile2);
+                    var newFile2: File = File(newFile, "CategoryName,$date.png")
+                    fout = FileOutputStream(newFile2)
 
-                //add your bitmap
-                bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)
-                fout.flush()
-                fout.close()
+                    //Add bitmap
+                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fout)
+                    fout.flush()
+                    fout.close()
 
 
                 } catch (e: Exception) {
@@ -265,13 +263,11 @@
                 //Popup message indicating that category was unable to be created
 
 
-                }
-            catch (e : Exception)
-            {
+            }
 
-            }
+        }
 
-        }
+    }
 
 
 
Index: app/src/main/res/layout/activity_registration.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".RegistrationActivity\"\r\n    android:background=\"@color/app_background_black\">\r\n\r\n\r\n        <!-- Box-2: Inner Background -->\r\n\r\n\r\n            <!-- Text: Already have an account? Log In -->\r\n\r\n    <!-- OutlinedButton-1: Sign Up with Google -->\r\n\r\n            <!-- OutlinedButton-2: Sign Up with Facebook -->\r\n\r\n            <!-- Button: LOGIN IN -->\r\n\r\n            <!-- Image: Logo -->\r\n\r\n    <TextView\r\n        android:id=\"@+id/btnRegisterRedirect\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"116dp\"\r\n        android:layout_marginTop=\"696dp\"\r\n        android:text=\"Already have an account? Log In\"\r\n        android:textColor=\"#FFFFFF\"\r\n        android:textSize=\"12sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <!-- Text: REGISTER -->\r\n\r\n    <!-- OutlinedTextField-1: Email address -->\r\n\r\n            <!-- Divider-1 -->\r\n\r\n            <!-- Divider-2 -->\r\n\r\n    <androidx.appcompat.widget.AppCompatButton\r\n        android:id=\"@+id/btnRegister\"\r\n        android:layout_width=\"242dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"88dp\"\r\n        android:layout_marginTop=\"624dp\"\r\n        android:background=\"#FFFF9B04\"\r\n        android:text=\"Register\"\r\n        android:textStyle=\"bold\"\r\n        android:textColor=\"#373737\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/txtTextName\"\r\n        android:layout_width=\"289dp\"\r\n        android:layout_height=\"53dp\"\r\n        android:layout_marginStart=\"56dp\"\r\n        android:layout_marginTop=\"216dp\"\r\n        android:height=\"52dp\"\r\n        android:hint=\"Name\"\r\n        android:inputType=\"textPersonName\"\r\n        android:textColorHint=\"#07A2B7\"\r\n        android:textColor=\"#07A2B7\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/txtSurname\"\r\n        android:layout_width=\"293dp\"\r\n        android:layout_height=\"56dp\"\r\n        android:layout_marginStart=\"56dp\"\r\n        android:layout_marginTop=\"292dp\"\r\n        android:autofillHints=\"Email Address\"\r\n        android:hint=\"Surname\"\r\n        android:inputType=\"textPersonName\"\r\n        android:textColorHint=\"#07A2B7\"\r\n        android:textColor=\"#07A2B7\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/txtEmailAddress\"\r\n        android:layout_width=\"292dp\"\r\n        android:layout_height=\"52dp\"\r\n        android:layout_marginStart=\"56dp\"\r\n        android:layout_marginTop=\"456dp\"\r\n        android:autofillHints=\"Email Address\"\r\n        android:drawableStart=\"@drawable/email_at_symbol\"\r\n        android:hint=\"@string/email_address\"\r\n        android:inputType=\"textEmailAddress\"\r\n        android:textColorHint=\"#07A2B7\"\r\n        android:textColor=\"#07A2B7\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/txtUserName\"\r\n        android:layout_width=\"290dp\"\r\n        android:layout_height=\"54dp\"\r\n        android:layout_marginStart=\"56dp\"\r\n        android:layout_marginTop=\"372dp\"\r\n        android:autofillHints=\"Email Address\"\r\n        android:hint=\"Username\"\r\n        android:inputType=\"textPersonName\"\r\n        android:textColorHint=\"#07A2B7\"\r\n        android:textColor=\"#07A2B7\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <!-- OutlinedTextField-2: Password -->\r\n\r\n            <!-- Image: Person Sitting Image -->\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/textLogin\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"148dp\"\r\n        android:layout_marginTop=\"72dp\"\r\n        android:text=\"REGISTER\"\r\n        android:textColor=\"#FFFFFF\"\r\n        android:textSize=\"40sp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <View\r\n        android:id=\"@+id/divider2\"\r\n        android:layout_width=\"144dp\"\r\n        android:layout_height=\"1dp\"\r\n        android:layout_marginStart=\"172dp\"\r\n        android:layout_marginTop=\"124dp\"\r\n        android:background=\"#FFFFFF\"\r\n        android:rotation=\"179.52\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <View\r\n        android:id=\"@+id/divider1\"\r\n        android:layout_width=\"144dp\"\r\n        android:layout_height=\"1dp\"\r\n        android:layout_marginStart=\"172dp\"\r\n        android:layout_marginTop=\"76dp\"\r\n        android:background=\"#FFFFFF\"\r\n        android:rotation=\"179.52\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/txtPassword\"\r\n        android:layout_width=\"294dp\"\r\n        android:layout_height=\"48dp\"\r\n        android:layout_marginStart=\"56dp\"\r\n        android:layout_marginTop=\"536dp\"\r\n        android:height=\"52dp\"\r\n        android:drawableStart=\"@drawable/password_lock\"\r\n        android:hint=\"@string/password\"\r\n        android:textColorHint=\"#07A2B7\"\r\n        android:textColor=\"#07A2B7\"\r\n        android:inputType=\"textPassword\"\r\n        android:textSize=\"20sp\"\r\n        android:inputType=\"textVisiblePassword\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imagePersonSitting\"\r\n        android:layout_width=\"73dp\"\r\n        android:layout_height=\"67dp\"\r\n        android:layout_marginStart=\"52dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:src=\"@drawable/person_sitting_login\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageLogo\"\r\n        android:layout_width=\"66dp\"\r\n        android:layout_height=\"61dp\"\r\n        android:layout_marginStart=\"52dp\"\r\n        android:layout_marginTop=\"96dp\"\r\n        android:src=\"@drawable/schedu_logo\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_registration.xml b/app/src/main/res/layout/activity_registration.xml
--- a/app/src/main/res/layout/activity_registration.xml	(revision 4b01cd7fa27a8f12dda0dc2e6a82e92e4b8c4bb1)
+++ b/app/src/main/res/layout/activity_registration.xml	(date 1714136183066)
@@ -165,9 +165,8 @@
         android:hint="@string/password"
         android:textColorHint="#07A2B7"
         android:textColor="#07A2B7"
-        android:inputType="textPassword"
-        android:textSize="20sp"
         android:inputType="textVisiblePassword"
+        android:textSize="20sp"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toTopOf="parent" />
 
